{% extends 'base_material_kit.twig' %}

{% block title %}Vista {{ entrada.titulo }}{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    {# {{ encore_entry_link_tags('app') }} #}

    {# <link rel="stylesheet" type="text/css" href="{{ asset('css/styles.css') }}"> #}
    {# <link rel="stylesheet" type="text/css" href="{{ asset('css/igles.min.css') }}"> #}
    <link rel="stylesheet" type="text/css" href="{{ asset('stream-ui-kit/assets/css/styles.css') }}">
    {# <link rel="stylesheet" type="text/css" href="{{ asset('material-kit/css/material-kit.min.css') }}"> #}
    {# <link rel="stylesheet" type="text/css" href="{{ asset('vendors/bootstrap/css/bootstrap.min.css') }}"> #}
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
          integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <style>

    </style>

{% endblock %}

{% block sections %}
    <section class="u-content-space border-bottom py-5 bg-gris-medio ">
        <div class="container text-center">
            <div class="row">
                <div class="col-sm-12">
                    <div class="show-article-container p-3 mt-4">
                        <h4><strong class="ml-5"> {{ entrada.titulo }} </strong>
                            <small>
                                Le gustó a:
                                <span class="js-like-entrada-count">{{ entrada.likes }}</span>
                                <a href="{{ path('entrada_toggle_like', {id: entrada.id}) }}"
                                   class="fas fa-heart like-entrada js-like-entrada">
                                </a>
                            </small>
                        </h4>
                    </div>
                </div>
                <div class="col-lg-6 align-self-center">
                    <img class="img-fluid rounded mb-4 mb-lg-0 overflow-auto align-items-center"
                         src="{{ entrada.imagePath|imagine_filter('squared_thumbnail_large') }}"
                         alt="<?php echo $lemaSinEspacios ?>">
                </div>
                <div class="col-lg-6 align-self-center">
                    <h5 class="card-title text-uppercase">
                        {{ entrada.titulo }}
                    </h5>
                    <div class="middle-0">
                        <i class="fas fa-quote-left mr-5"></i><br/>
                        {{ entrada.contenido | raw }}
                        <i class="fas fa-quote-right ml-5"></i>
                    </div>
                    <div class="btn-group bottom-0 justify-content-between border-alameda border-alameda-top border-alameda-bottom pt-1 ">
                        {% for referencia in entrada.entradaReferences %}
                            <a href="/descargas/referencias/{{ referencia.filename}}"
                               target="_blank"
                               download
                                id="descargar"
                               class="descargar card-link text-center ">
                                <i class="far fa-file-pdf ml-5 mr-1"></i>
                                <span class="text-alameda btn-icon ">Notas</span><br/>
                            </a>
                        {% endfor %}
                    </div>
                </div>
                <div class="col-sm-12">
                    {% if (is_granted("ROLE_ESCRITOR")) %}
                        Id : {{ entrada.id }}
                    {% endif %}
                </div>
                <div class="row">
                    {#                        <div class="col-sm-12">#}
                    {#                            <h3><i class="pr-3 fa fa-comment"></i>{{ entrada.comentariosNoDeleted|length }} Comentarios#}
                    {#                            </h3>#}
                    {% if(entrada.comentariosNoDeleted) %}
                        {#                                <div class="row">#}

                        <div class="comment-container d-inline-block p-0 m-0 align-top col-sm-12">
                            {#                                            <span class="commenter-name">{{ comentario.autor }}</span>#}

                            {% include('comentario/nota.html.twig') %}
                            {#                                            <small>realizado {{ comentario.createdAt|ago }}</small>#}
                            {#                                            {% if comentario.isDeleted %}#}
                            {#                                                <span class="fas fa-times-circle text-danger"></span> Borrado#}
                            {#                                            {% endif %}#}
                            {#                                            <br/>#}
                            {#                                            <span class="comment"> {{ comentario.contenido }}</span>#}
                            <hr class="border-bottom"/>
                        </div>

                        {#                                    </div>#}
                        {#                                </div>#}
                    {% endif %}
                    {#                        </div>#}

                </div>
                <div class="col-sm-12 text-center">
                    <a class="btn btn-link" href="{{ path('index') }}"><i class="fa fa-home"></i> </a>
                </div>
            </div>
        </div>
    </section>

{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/entrada_show.js') }}"></script>
    <script type="application/javascript">
        $(window).load(function () {
            document.getElementById('descargar').click();
        })
    </script>
    <script type="application/javascript">

        $(function () {
            const pcentral= localStorage.getItem("NotaPcentral");
            const puno= localStorage.getItem("NotaPuno");
            const pdos= localStorage.getItem("NotaPdos");
            const ptres= localStorage.getItem("NotaPtres");
            const pcuatro= localStorage.getItem("NotaPcuatro");
            if (pcentral != null) {
                aceptado('central');
            }if (puno != null) {
                aceptado('uno');
            }if (pdos != null) {
                aceptado('dos');
            }if (ptres != null) {
                aceptado('tres');
            }if (pcuatro != null) {
                aceptado('cuatro');
            }

        });
        $(function () {
            $('#xpcentral').click(function () {
                $('#lpcentral').html('');
                $('#sinpcentral').show();
            });
            $('#xpuno').click(function () {
                $('#lpuno').html('');
                $('#sinpuno').show();
            });
            $('#xpdos').click(function () {
                $('#lpdos').html('');
                $('#sinpdos').show();
            });$('#xptres').click(function () {
                $('#lptres').html('');
                $('#sinptres').show();
            });$('#xpcuatro').click(function () {
                $('#lpcuatro').html('');
                $('#sinpcuatro').show();
            });

        });

        $(function () {
            $('#bcentral').click(function () {
                const pcentral = $('#pcentral').val();
                if (pcentral == null || pcentral == '') {
                    $('#pcentral').attr('placeholder', 'Aquí debés completar la idea');
                    return false;
                }

                localStorage.NotaPcentral = JSON.stringify(pcentral);
                let central = 'central';
                aceptado(central)

            });

            $('#buno').click(function () {
                const puno = $('#puno').val();
                if (puno == null || puno == '') {
                    $('#puno').attr('placeholder', 'Aquí debés completar la idea');
                    return false;
                }

                localStorage.NotaPuno = JSON.stringify(puno);
                let uno = 'uno';
                aceptado(uno)

            });$('#bdos').click(function () {
                const pdos = $('#pdos').val();
                if (pdos == null || pdos == '') {
                    $('#pdos').attr('placeholder', 'Aquí debés completar la idea');
                    return false;
                }

                localStorage.NotaPdos = JSON.stringify(pdos);
                let dos = 'dos';
                aceptado(dos)

            });$('#btres').click(function () {
                const ptres = $('#ptres').val();
                if (ptres == null || ptres == '') {
                    $('#ptres').attr('placeholder', 'Aquí debés completar la idea');
                    return false;
                }

                localStorage.NotaPtres = JSON.stringify(ptres);
                let tres = 'tres';
                aceptado(tres)

            });$('#bcuatro').click(function () {
                const pcuatro = $('#pcuatro').val();
                if (pcuatro == null || pcuatro == '') {
                    $('#pcuatro').attr('placeholder', 'Aquí debés completar la idea');
                    return false;
                }

                localStorage.NotaPcuatro = JSON.stringify(pcuatro);
                let cuatro = 'cuatro';
                aceptado(cuatro)

            });


        });

        function aceptado(p) {


            if(p === 'uno') {
                const puno = JSON.parse(localStorage.NotaPuno);

                $('#lpuno').addClass('fontTahu fa-2x');
                $('#lpuno').html(puno + '         <small id="xpuno">*</small>');
                $('#sinpuno').hide();
            }
            if(p === 'central') {

                const pcentral = JSON.parse(localStorage.NotaPcentral);

                $('#lpcentral').addClass('fontTahu fa-2x');
                $('#lpcentral').html(pcentral + '         <small id="xpcentral">*</small>');
                $('#sinpcentral').hide();
            }if(p === 'dos') {
                const pdos = JSON.parse(localStorage.NotaPdos);

                $('#lpdos').addClass('fontTahu fa-2x');
                $('#lpdos').html(pdos + '         <small id="xpdos">*</small>');
                $('#sinpdos').hide();
            }if(p === 'tres') {
                const ptres = JSON.parse(localStorage.NotaPtres);

                $('#lptres').addClass('fontTahu fa-2x');
                $('#lptres').html(ptres + '         <small id="xptres">*</small>');
                $('#sinptres').hide();
            }if(p === 'cuatro') {
                const pcuatro = JSON.parse(localStorage.NotaPcuatro);

                $('#lpcuatro').addClass('fontTahu fa-2x');
                $('#lpcuatro').html(pcuatro + '         <small id="xpcuatro">*</small>');
                $('#sinpcuatro').hide();
            }

        }
    </script>
{% endblock %}
